(()=>{const t=firebase.firestore(),e=document.getElementById("task-form"),n=document.getElementById("tasks-container");let a=!1,o="";window.addEventListener("DOMContentLoaded",(async s=>{var i;i=s=>{n.innerHTML="",s.forEach((t=>{const e=t.data();n.innerHTML+=`<div class="card card-body mt-2 border-primary">\n    <h3 class="h5">${e.title}</h3>\n    <p>${e.description}</p>\n    <div>\n      <button class="btn btn-primary btn-delete" data-id="${t.id}">\n        ðŸ—‘ Delete\n      </button>\n      <button class="btn btn-secondary btn-edit" data-id="${t.id}">\n        ðŸ–‰ Edit\n      </button>\n    </div>\n  </div>`})),n.querySelectorAll(".btn-delete").forEach((e=>e.addEventListener("click",(async e=>{console.log(e.target.dataset.id);try{await(e=>t.collection("tasks").doc(e).delete())(e.target.dataset.id)}catch(t){console.log(t)}})))),n.querySelectorAll(".btn-edit").forEach((n=>{n.addEventListener("click",(async n=>{try{const s=await(e=>t.collection("tasks").doc(e).get())(n.target.dataset.id),i=s.data();e["task-title"].value=i.title,e["task-description"].value=i.description,a=!0,o=s.id,e["btn-task-form"].innerText="Update"}catch(t){console.log(t)}}))}))},t.collection("tasks").onSnapshot(i)})),e.addEventListener("submit",(async n=>{n.preventDefault();const s=e["task-title"],i=e["task-description"];try{a?(await((e,n)=>t.collection("tasks").doc(e).update(n))(o,{title:s.value,description:i.value}),a=!1,o="",e["btn-task-form"].innerText="Save"):await((e,n)=>t.collection("tasks").doc().set({title:e,description:n}))(s.value,i.value),e.reset(),s.focus()}catch(t){console.log(t)}}))})();